<!DOCTYPE html>
<html>
<head>
	<title>
		app.es
	</title>


		<script type="text/javascript" src="node_modules/traceur/bin/traceur.js"></script>
		<script type="text/javascript" src="node_modules/systemjs/dist/system.js"></script>
		<script type="text/javascript" src="config.js"></script>

<script type="text/javascript">

System.config({ 
  traspiller:"traceur"
});

</script>


</head>

<body>

<script type="module" src="injector.js"></script>


 <script type="text/javascript">

 System.import("timeout").then(function(timeout){ return timeout.default })
		  	 .then( function(timeout){ return timeout(300) })
			 .then(function(){ console.log("timeout!")});


var Injector = System.import("injector").then(function(Injector){   

	return Injector.default;
	
   }).then(function(Injector){

      var injector = Injector();

		var ViewModelA = {
		   initialize: function () {
		     console.log('ViewModelA');
		  }
		};
		var ViewModelB = {
		    initialize: function () {
		        console.log('ViewModelB');
		   }
		};
		
		
		var WelcomeController = function (ViewModel) {
		     ViewModel.initialize();
		};
		
		injector.register('ViewModel', Math.random() > 0.5 ? ViewModelA : ViewModelB);
		
		injector.process(WelcomeController);

	});

</script>
</body>
</html>